<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Autopilot</title>
</head>
<body>
    <% if (data.error) { %>
        <%= data.message %>
    <% } %>
    <form method="POST" action="./otpcheck">
        <div>
            <span>OTP:</span>
            <label>
                <input type="text" name="otp">
            </label>
        </div>
        <input type="hidden" name="csrfToken" value="<%= data.csrfToken %>">
        <% if (data.to) { %>
            <input type="hidden" name="to" value="<%= data.to %>">
        <% } %>
        <div>
            <input type="submit" value="LOGIN">
        </div>
    </form>
    <form method="POST" action="./otpcheck">
        <input type="hidden" name="resendmail" value="-">
        Not receiving OTP email?
        <% if (data.to) { %>
            <input type="hidden" name="to" value="<%= data.to %>">
        <% } %>
        <input type="submit" value="Resend email.">
    </form>
</body>
<script>
  ((document) => {
    const forms = document.querySelectorAll('form')
    const buttons = document.querySelectorAll('input[type=\'submit\']')
    forms.forEach(form => form.addEventListener('submit', () => buttons.forEach(v => v.disabled = true)))
  })(document)
</script>
</html>
